1. Install JBoss EAP Adapter

	Download adapter from Red Hat official site
	Unzip it in $EAP_HOME folder
	Run offline script:
		./bin/jboss-cli.sh --file=bin/adapter-elytron-install-offline.cli

2. Secure WAR via Adapter Subsystem. Update standalone.xml file to configure keycloak subsystem with the one generated by Red Hat SSO

	<profile>
	  <subsystem xmlns="urn:jboss:domain:keycloak:1.1">
	      <secure-deployment name="sso-training-jee8-eap7.war">
			   <realm>Capitalisation</realm>
			   <auth-server-url>http://localhost:8180/auth</auth-server-url>
			   <bearer-only>true</bearer-only>
			   <ssl-required>EXTERNAL</ssl-required>
			   <resource>sso-training-jee8-eap7</resource>
			</secure-deployment>
	  </subsystem>
	</profile>
	
3. Modify web.xml to enable security annotation and add a module name corresponding to previous secure-deployment name

	<module-name>sso-training-jee8-eap7</module-name>

	<context-param>
		<param-name>resteasy.role.based.security</param-name>
		<param-value>true</param-value>
	</context-param>

4. Secure REST API with @RoleAllowed annotation to secure

5. Bonus: retrieve user details from SecurityContext

